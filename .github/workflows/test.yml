---
name: path Test
on:
  push:
     paths: 
       - 'roles/**'
       - '.github/workflows/test.yml'
     
jobs:
  build:
    runs-on: ubuntu-latest
    name: Test changed-files
    steps:
      - uses: actions/checkout@v2
        with:
          fetch-depth: 0  # OR "2" -> To retrieve the preceding commit.

      # Example 1
      - name: Get changed files
        id: changed-files
        uses: tj-actions/changed-files@v34

      - name: List all changed files
        run: |
          for file in ${{ steps.changed-files.outputs.all_changed_files }}; do
            echo "$file was changed"
          done
          
      - name: Run step if any file(s) in the docs folder change
        if: steps.changed-files-specific.outputs.any_changed == 'true'
        run: |
          echo "One or more files in the docs folder has changed."
          echo "List all the files that have changed: ${{ steps.changed-files-specific.outputs.all_changed_files }}"
      
      - name: Echo
        run: echo ${{ steps.get_changed.outputs.changed }}
  
#jobs:
#  build:
#    runs-on: ubuntu-latest
#    strategy:
#      max-parallel: 4
#      matrix:
#        python-version:
#          - 3.8
#        collection_role:
#          - Newrole
#        reponame:
#          - moleculemultiroles
#    steps:
#      - uses: actions/checkout@v2
#      - uses: dorny/paths-filter@v2
        #id: filter
        #with:
        #  filters: |
        #    path1:
        #      - 'roles/DCE/fooapp/**'
        #    path2:
        #      - 'roles/Test/Newrole/**'
        #    path3:
        #    - '.github/workflows/**'
              
            
#      - name: Install dependencies & Molecule Test for Newrole
#        if: steps.filter.outputs.path2 == 'true'
      #  run: |
      #    python3 -m pip install --upgrade pip
      #    python3 -m pip install molecule ansible-core
      #    python3 -m pip install --upgrade --user setuptools
      #    python3 -m pip install --user "molecule[docker]"
      #    ansible-galaxy collection install community.docker
      #    cd moleculemultiroles/roles/Test/Newrole && molecule test -s ${{ matrix.collection_role }}

      

